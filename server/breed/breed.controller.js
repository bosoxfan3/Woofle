'use strict';

exports.fetchBreedData = fetchBreedData;
exports.showBreedPage = showBreedPage;
exports.loadSearchBar = loadSearchBar;

const _ = require('lodash');
const breedService = require('./breed.service');
const path = require('path');

function fetchBreedData(req, res, next) {
  const breedName = req.params.breedName;
  Promise.all([
    breedService.getDataFromDogCEOApi(breedName),
    breedService.getDataFromYouTubeApi(breedName),
  ])
    .then(([imageData, youTubeData]) => {
      const imageUrls = _.slice(imageData.message,0 ,8);
      return res.json({imageUrls, youTubeData});
    })
    .catch(err => {
      res.status(500).json({message: 'Internal server error'});
    });
}
//Promise.all makes sure this gets started after the data has been retrieved from both APIs.
//This makes it so they load at the same time. Also if you go to the endpoint breed/fetch/breedName
//in the browser you will see the two objects that are returned in line 15

function showBreedPage(req, res, next) {
  res.sendFile(path.resolve('public-secure/breed/index.html'));
}

function loadSearchBar(req, res, next) {
  res.json(breedData.dogBreedArray);
}

const breedData = {
  dogBreedArray: [
    { value: 'Affenpinscher',
      inputText: 'Affenpinscher' },
    { value: 'Afghan Hound',
      inputText: 'Afghan Hound' },
    { value: 'African',
      inputText: 'African' },
    { value: 'Airedale',
      inputText: 'Airedale' },
    { value: 'Akita',
      inputText: 'Akita' },
    { value: 'American Terrier',
      inputText: 'American Terrier' },
    { value: 'Appenzeller',
      inputText: 'Appenzeller' },
    { value: 'Australian Terrier',
      inputText: 'Australian Terrier' },
    { value: 'Basenji',
      inputText: 'Basenji' },
    { value: 'Basset Hound',
      inputText: 'Basset Hound' },
    { value: 'Beagle',
      inputText: 'Beagle' },
    { value: 'Bedlington Terrier',
      inputText: 'Bedlington Terrier' },
    { value: 'Bernese Mountain',
      inputText: 'Bernese Mountain' },
    { value: 'Blenheim Spaniel',
      inputText: 'Blenheim Spaniel' },
    { value: 'Blood Hound',
      inputText: 'Blood Hound' },
    { value: 'Bluetick',
      inputText: 'Bluetick' },
    { value: 'Border Collie',
      inputText: 'Border Collie' },
    { value: 'Border Terrier',
      inputText: 'Border Terrier' },
    { value: 'Borzoi',
      inputText: 'Borzoi' },
    { value: 'Boston Bulldog',
      inputText: 'Boston Bulldog' },
    { value: 'Bouvier',
      inputText: 'Bouvier' },
    { value: 'Boxer',
      inputText: 'Boxer' },
    { value: 'Brabancon',
      inputText: 'Brabancon' },
    { value: 'Briard',
      inputText: 'Briard' },
    { value: 'Brittany Spaniel',
      inputText: 'Brittany Spaniel' },
    { value: 'Bull Mastiff',
      inputText: 'Bull Mastiff' },
    { value: 'Cairn',
      inputText: 'Cairn' },
    { value: 'Cardigan Corgi',
      inputText: 'Cardigan Corgi' },
    { value: 'Chihuahua',
      inputText: 'Chihuahua' },
    { value: 'Chesapeake Retriever',
      inputText: 'Chesapeake Retriever' },
    { value: 'Chow',
      inputText: 'Chow' },
    { value: 'Clumber',
      inputText: 'Clumber' }, 
    { value: 'Cocker Spaniel',
      inputText: 'Cocker Spaniel' },     
    { value: 'Coonhound',
      inputText: 'Coonhound' },
    { value: 'Curly Retriever',
      inputText: 'Curly Retriever' },
    { value: 'Dachshund',
      inputText: 'Dachshund' },
    { value: 'Dandie Terrier',
      inputText: 'Dandie Terrier' },
    { value: 'Dhole',
      inputText: 'Dhole' },
    { value: 'Dingo',
      inputText: 'Dingo' },
    { value: 'Doberman',
      inputText: 'Doberman' },
    { value: 'English Hound',
      inputText: 'English Hound' },
    { value: 'English Setter',
      inputText: 'English Setter' },
    { value: 'English Sheepdog',
      inputText: 'English Sheepdog' },
    { value: 'English Springer',
      inputText: 'English Springer' },
    { value: 'Entlebucher',
      inputText: 'Entlebucher' },
    { value: 'Eskimo',
      inputText: 'Eskimo' },
    { value: 'Flatcoated Retriever',
      inputText: 'Flatcoated Retriever' },
    { value: 'Fox Terrier',
      inputText: 'Fox Terrier' },
    { value: 'French Bulldog',
      inputText: 'French Bulldog' },
    { value: 'Germanshepherd',
      inputText: 'German Shepherd' },
    { value: 'German Pointer',
      inputText: 'German Pointer' },
    { value: 'Giant Schnauzer',
      inputText: 'Giant Schnauzer' },
    { value: 'Golden Retriever',
      inputText: 'Golden Retriever' },
    { value: 'Gordon Setter',
      inputText: 'Gordon Setter' },
    { value: 'Great Dane',
      inputText: 'Great Dane' },
    { value: 'Groenendael',
      inputText: 'Groenendael' },
    { value: 'Husky',
      inputText: 'Husky' },
    { value: 'Ibizan Hound',
      inputText: 'Ibizan Hound' },
    { value: 'Italian Grehound',
      inputText: 'Italian Greyhound' },
    { value: 'Irish Setter',
      inputText: 'Irish Setter' },
    { value: 'Irish Spaniel',
      inputText: 'Irish Spaniel' },
    { value: 'Irish Terrier',
      inputText: 'Irish Terrier' },
    { value: 'Irish Wolfhound',
      inputText: 'Irish Wolfhound' },
    { value: 'Japanese Spaniel',
      inputText: 'Japanese Spaniel' },
    { value: 'Keeshond',
      inputText: 'Keeshond' },
    { value: 'Kelpie',
      inputText: 'Kelpie' },
    { value: 'Kerryblue Terrier',
      inputText: 'Kerryblue Terrier' },
    { value: 'Komondor',
      inputText: 'Komondor' },
    { value: 'Kuvasz',
      inputText: 'Kuvasz' },
    { value: 'Labrador',
      inputText: 'Labrador' },
    { value: 'Lakeland Terrier',
      inputText: 'Lakeland Terrier' },
    { value: 'Leonberg',
      inputText: 'Leonberg' },
    { value: 'Lhasa',
      inputText: 'Lhasa' },
    { value: 'Malamute',
      inputText: 'Malamute' },
    { value: 'Malinois',
      inputText: 'Malinois' },
    { value: 'Maltese',
      inputText: 'Maltese' },
    { value: 'Miniature Pinscher',
      inputText: 'Miniature Pinscher' },
    { value: 'Miniature Poodle',
      inputText: 'Miniature Poodle' },
    { value: 'Miniature Schnauzer',
      inputText: 'Miniature Schnauzer' },
    { value: 'Newfoundland',
      inputText: 'Newfoundland' },
    { value: 'Norfolk Terrier',
      inputText: 'Norfolk Terrier' },
    { value: 'Norwegian Elkhound',
      inputText: 'Norwegian Elkhound' },
    { value: 'Norwich Terrier',
      inputText: 'Norwich Terrier' },
    { value: 'Otterhound',
      inputText: 'Otterhound' },
    { value: 'Papillon',
      inputText: 'Papillon' },
    { value: 'Patterdale Terrier',
      inputText: 'Patterdale Terrier' },
    { value: 'Pekinese',
      inputText: 'Pekinese' },
    { value: 'Pembroke',
      inputText: 'Pembroke' },
    { value: 'Pomeranian',
      inputText: 'Pomeranian' },
    { value: 'Pug',
      inputText: 'Pug' },
    { value: 'Pyrenees',
      inputText: 'Pyrenees' },
    { value: 'Redbone',
      inputText: 'Redbone' },
    { value: 'Rhodesian Ridgeback',
      inputText: 'Rhodesian Ridgeback' },
    { value: 'Rottweiler',
      inputText: 'Rottweiler' },
    { value: 'Saluki',
      inputText: 'Saluki' },
    { value: 'Samoyed',
      inputText: 'Samoyed' },
    { value: 'Schipperke',
      inputText: 'Schipperke' },
    { value: 'Scottish Deerhound',
      inputText: 'Scottish Deerhound' },
    { value: 'Scottish Terrier',
      inputText: 'Scottish Terrier' },
    { value: 'Sealyham Terrier',
      inputText: 'Sealyham Terrier' },
    { value: 'Shetland Sheepdog',
      inputText: 'Shetland Sheepdog' },
    { value: 'Shiba',
      inputText: 'Shiba' },
    { value: 'Shihtzu',
      inputText: 'Shihtzu' },
    { value: 'Silky Terrier',
      inputText: 'Silky Terrier' },
    { value: 'Staffordshire Bullterrier',
      inputText: 'Staffordshire Bullterrier' },
    { value: 'Standard Poodle',
      inputText: 'Standard Poodle' },
    { value: 'Stbernard',
      inputText: 'Saint Bernard' },
    { value: 'Sussex Spaniel',
      inputText: 'Sussex Spaniel' },
    { value: 'Swiss Mountain',
      inputText: 'Swiss Mountain' },
    { value: 'Tibetan Mastiff',
      inputText: 'Tibetan Mastiff' },
    { value: 'Tibetan Terrier',
      inputText: 'Tibetan Terrier' },
    { value: 'Toy Poodle',
      inputText: 'Toy Poodle' },
    { value: 'Toy Terrier',
      inputText: 'Toy Terrier' },
    { value: 'Vizsla',
      inputText: 'Vizsla' },
    { value: 'Walker Hound',
      inputText: 'Walker Hound' },
    { value: 'Weimaraner',
      inputText: 'Weimaraner' },
    { value: 'Welsh Spaniel',
      inputText: 'Welsh Spaniel' },
    { value: 'Westhighland Terrier',
      inputText: 'Westhighland Terrier' },
    { value: 'Wheaten Terrier',
      inputText: 'Wheaten Terrier' },
    { value: 'Whippet',
      inputText: 'Whippet' },
    { value: 'Yorkshire Terrier',
      inputText: 'Yorkshire Terrier' },
  ]
};